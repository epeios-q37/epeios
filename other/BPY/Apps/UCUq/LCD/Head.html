<title>LCD</title>
<style>
  #controls {
    margin-bottom: 12px;
    max-width: 600px;
  }

  #lcd-pixels {
    display: inline-block;
    background: #23281c;
    padding: 0.5vw;
    border-radius: 1em;
    box-shadow: 0 0 12px #23281c88;
    max-width: 98vw;
    overflow-x: auto;
    box-sizing: border-box;
  }

  .lcd-line {
    display: flex;
    justify-content: center;
  }

  .lcd-char {
    margin: 0.2vw;
    background: #134513;
    border-radius: 0.5vw;
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    grid-template-rows: repeat(8, 1fr);
    width: var(--char-w, 5vw);
    height: var(--char-h, 8vw);
    min-width: 24px;
    min-height: 36px;
    box-sizing: border-box;
  }

  .lcd-dot {
    width: 85%;
    height: 80%;
    border-radius: 15%;
    background: #2a4700;
    margin: auto;
    transition: background 0.2s;
  }

  .lcd-dot.on {
    background: #b8ff7a;
    box-shadow: 0 0 0.6vw #76e32a88;
  }

  #controls input[type=number] {
    width: 3em;
    margin-right: 5px;
  }

  #lcdtext {
    width: 98%;
    min-width: 120px;
    max-width: 100%;
    box-sizing: border-box;
    margin-top: 0.5em;
    font-size: 1em;
    font-family: monospace;
    resize: vertical;
  }

  @media screen and (max-width: 600px) {
    .lcd-char {
      min-width: 14px;
      min-height: 21px;
    }

    #controls {
      font-size: .95em;
      padding: 0 1vw;
    }

    #lcd-pixels {
      padding: 2vw;
    }
  }
</style>
<script>
  var chrtbl = Array();
  chrtbl[0] = Array(0, 0, 0, 0, 0, 0, 0, 0);
  chrtbl[1] = Array(0, 0, 0, 0, 0, 0, 0, 0);
  chrtbl[2] = Array(0, 0, 0, 0, 0, 0, 0, 0);
  chrtbl[3] = Array(0, 0, 0, 0, 0, 0, 0, 0);
  chrtbl[4] = Array(0, 0, 0, 0, 0, 0, 0, 0);
  chrtbl[5] = Array(0, 0, 0, 0, 0, 0, 0, 0);
  chrtbl[6] = Array(0, 0, 0, 0, 0, 0, 0, 0);
  chrtbl[7] = Array(0, 0, 0, 0, 0, 0, 0, 0);
  chrtbl[8] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[9] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[10] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[11] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[12] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[13] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[14] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[15] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[16] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[17] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[18] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[19] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[20] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[21] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[22] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[23] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[24] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[25] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[26] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[27] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[28] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[29] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[30] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[31] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[32] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[33] = Array(4, 4, 4, 4, 4, 0, 4);
  chrtbl[34] = Array(10, 10, 10, 0, 0, 0, 0);
  chrtbl[35] = Array(10, 10, 31, 10, 31, 10, 10);
  chrtbl[36] = Array(4, 15, 20, 14, 5, 30, 4);
  chrtbl[37] = Array(24, 25, 2, 4, 8, 19, 3);
  chrtbl[38] = Array(12, 18, 20, 8, 21, 18, 13);
  chrtbl[39] = Array(12, 4, 8, 0, 0, 0, 0);
  chrtbl[40] = Array(2, 4, 8, 8, 8, 4, 2);
  chrtbl[41] = Array(8, 4, 2, 2, 2, 4, 8);
  chrtbl[42] = Array(0, 4, 21, 14, 21, 4, 0);
  chrtbl[43] = Array(0, 4, 4, 31, 4, 4, 0);
  chrtbl[44] = Array(0, 0, 0, 0, 12, 4, 8);
  chrtbl[45] = Array(0, 0, 0, 31, 0, 0, 0);
  chrtbl[46] = Array(0, 0, 0, 0, 0, 12, 12);
  chrtbl[47] = Array(0, 1, 2, 4, 8, 16, 0);
  chrtbl[48] = Array(14, 17, 19, 21, 25, 17, 14);
  chrtbl[49] = Array(4, 12, 4, 4, 4, 4, 14);
  chrtbl[50] = Array(14, 17, 1, 2, 4, 8, 31);
  chrtbl[51] = Array(31, 2, 4, 2, 1, 17, 14);
  chrtbl[52] = Array(2, 6, 10, 18, 31, 2, 2);
  chrtbl[53] = Array(31, 16, 30, 1, 1, 17, 14);
  chrtbl[54] = Array(6, 8, 16, 30, 17, 17, 14);
  chrtbl[55] = Array(31, 1, 2, 4, 8, 8, 8);
  chrtbl[56] = Array(14, 17, 17, 14, 17, 17, 14);
  chrtbl[57] = Array(14, 17, 17, 15, 1, 2, 12);
  chrtbl[58] = Array(0, 12, 12, 0, 12, 12, 0);
  chrtbl[59] = Array(0, 12, 12, 0, 12, 4, 8);
  chrtbl[60] = Array(2, 4, 8, 16, 8, 4, 2);
  chrtbl[61] = Array(0, 0, 31, 0, 31, 0, 0);
  chrtbl[62] = Array(16, 8, 4, 2, 4, 8, 16);
  chrtbl[63] = Array(14, 17, 1, 2, 4, 0, 4);
  chrtbl[64] = Array(14, 17, 1, 13, 21, 21, 14);
  chrtbl[65] = Array(14, 17, 17, 17, 31, 17, 17);
  chrtbl[66] = Array(30, 17, 17, 30, 17, 17, 30);
  chrtbl[67] = Array(14, 17, 16, 16, 16, 17, 14);
  chrtbl[68] = Array(30, 17, 17, 17, 17, 17, 30);
  chrtbl[69] = Array(31, 16, 16, 30, 16, 16, 31);
  chrtbl[70] = Array(31, 16, 16, 30, 16, 16, 16);
  chrtbl[71] = Array(14, 17, 16, 23, 17, 17, 15);
  chrtbl[72] = Array(17, 17, 17, 31, 17, 17, 17);
  chrtbl[73] = Array(14, 4, 4, 4, 4, 4, 14);
  chrtbl[74] = Array(7, 2, 2, 2, 2, 18, 12);
  chrtbl[75] = Array(17, 18, 20, 24, 20, 18, 17);
  chrtbl[76] = Array(16, 16, 16, 16, 16, 16, 31);
  chrtbl[77] = Array(17, 27, 21, 21, 17, 17, 17);
  chrtbl[78] = Array(17, 17, 25, 21, 19, 17, 17);
  chrtbl[79] = Array(14, 17, 17, 17, 17, 17, 14);
  chrtbl[80] = Array(30, 17, 17, 30, 16, 16, 16);
  chrtbl[81] = Array(14, 17, 17, 17, 21, 18, 13);
  chrtbl[82] = Array(30, 17, 17, 30, 20, 18, 17);
  chrtbl[83] = Array(15, 16, 16, 14, 1, 1, 30);
  chrtbl[84] = Array(31, 4, 4, 4, 4, 4, 4);
  chrtbl[85] = Array(17, 17, 17, 17, 17, 17, 14);
  chrtbl[86] = Array(17, 17, 17, 17, 17, 10, 4);
  chrtbl[87] = Array(17, 17, 17, 21, 21, 21, 10);
  chrtbl[88] = Array(17, 17, 10, 4, 10, 17, 17);
  chrtbl[89] = Array(17, 17, 17, 10, 4, 4, 4);
  chrtbl[90] = Array(31, 1, 2, 4, 8, 16, 31);
  chrtbl[91] = Array(14, 8, 8, 8, 8, 8, 14);
  chrtbl[92] = Array(17, 10, 31, 4, 31, 4, 4);
  chrtbl[93] = Array(14, 2, 2, 2, 2, 2, 14);
  chrtbl[94] = Array(4, 10, 17, 0, 0, 0, 0);
  chrtbl[95] = Array(0, 0, 0, 0, 0, 0, 31);
  chrtbl[96] = Array(8, 4, 2, 0, 0, 0, 0);
  chrtbl[97] = Array(0, 0, 14, 1, 15, 17, 15);
  chrtbl[98] = Array(16, 16, 22, 25, 17, 17, 30);
  chrtbl[99] = Array(0, 0, 14, 16, 16, 17, 14);
  chrtbl[100] = Array(1, 1, 13, 19, 17, 17, 15);
  chrtbl[101] = Array(0, 0, 14, 17, 31, 16, 14);
  chrtbl[102] = Array(6, 9, 8, 28, 8, 8, 8);
  chrtbl[103] = Array(0, 0, 15, 17, 15, 1, 14);
  chrtbl[104] = Array(16, 16, 22, 25, 17, 17, 17);
  chrtbl[105] = Array(4, 0, 12, 4, 4, 4, 14);
  chrtbl[106] = Array(2, 0, 6, 2, 2, 18, 12);
  chrtbl[107] = Array(16, 16, 18, 20, 24, 20, 18);
  chrtbl[108] = Array(12, 4, 4, 4, 4, 4, 14);
  chrtbl[109] = Array(0, 0, 26, 21, 21, 17, 17);
  chrtbl[110] = Array(0, 0, 22, 25, 17, 17, 17);
  chrtbl[111] = Array(0, 0, 14, 17, 17, 17, 14);
  chrtbl[112] = Array(0, 0, 30, 17, 30, 16, 16);
  chrtbl[113] = Array(0, 0, 13, 19, 15, 1, 1);
  chrtbl[114] = Array(0, 0, 22, 25, 16, 16, 16);
  chrtbl[115] = Array(0, 0, 15, 16, 14, 1, 30);
  chrtbl[116] = Array(8, 8, 28, 8, 8, 9, 6);
  chrtbl[117] = Array(0, 0, 17, 17, 17, 19, 13);
  chrtbl[118] = Array(0, 0, 17, 17, 17, 10, 4);
  chrtbl[119] = Array(0, 0, 17, 17, 21, 21, 10);
  chrtbl[120] = Array(0, 0, 17, 10, 4, 10, 17);
  chrtbl[121] = Array(0, 0, 17, 17, 15, 1, 14);
  chrtbl[122] = Array(0, 0, 31, 2, 4, 8, 31);
  chrtbl[123] = Array(2, 4, 4, 8, 4, 4, 2);
  chrtbl[124] = Array(4, 4, 4, 4, 4, 4, 4);
  chrtbl[125] = Array(8, 4, 4, 2, 4, 4, 8);
  chrtbl[126] = Array(0, 4, 2, 31, 2, 4, 0);
  chrtbl[127] = Array(0, 4, 8, 31, 8, 4, 0);
  chrtbl[128] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[129] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[130] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[131] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[132] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[133] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[134] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[135] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[136] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[137] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[138] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[139] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[140] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[141] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[142] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[143] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[144] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[145] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[146] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[147] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[148] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[149] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[150] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[151] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[152] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[153] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[154] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[155] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[156] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[157] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[158] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[159] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[160] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[161] = Array(0, 0, 0, 0, 28, 20, 28);
  chrtbl[162] = Array(7, 4, 4, 4, 0, 0, 0);
  chrtbl[163] = Array(0, 0, 0, 4, 4, 4, 28);
  chrtbl[164] = Array(0, 0, 0, 0, 16, 8, 4);
  chrtbl[165] = Array(0, 0, 0, 12, 12, 0, 0);
  chrtbl[166] = Array(0, 31, 1, 31, 1, 2, 4);
  chrtbl[167] = Array(0, 0, 31, 1, 6, 4, 8);
  chrtbl[168] = Array(0, 0, 2, 4, 12, 20, 4);
  chrtbl[169] = Array(0, 0, 4, 31, 17, 1, 6);
  chrtbl[170] = Array(0, 0, 0, 31, 4, 4, 31);
  chrtbl[171] = Array(0, 0, 2, 31, 6, 10, 18);
  chrtbl[172] = Array(0, 0, 8, 31, 9, 10, 8);
  chrtbl[173] = Array(0, 0, 0, 14, 2, 2, 31);
  chrtbl[174] = Array(0, 0, 30, 2, 30, 2, 30);
  chrtbl[175] = Array(0, 0, 0, 21, 21, 1, 6);
  chrtbl[176] = Array(0, 0, 0, 0, 31, 0, 0);
  chrtbl[177] = Array(31, 1, 5, 6, 4, 4, 8);
  chrtbl[178] = Array(1, 2, 4, 12, 20, 4, 4);
  chrtbl[179] = Array(4, 31, 17, 17, 1, 2, 4);
  chrtbl[180] = Array(0, 0, 31, 4, 4, 4, 31);
  chrtbl[181] = Array(2, 31, 2, 6, 10, 18, 2);
  chrtbl[182] = Array(8, 31, 9, 9, 9, 9, 18);
  chrtbl[183] = Array(4, 31, 4, 31, 4, 4, 4);
  chrtbl[184] = Array(0, 15, 9, 17, 1, 2, 12);
  chrtbl[185] = Array(8, 15, 18, 2, 2, 2, 4);
  chrtbl[186] = Array(0, 31, 1, 1, 1, 1, 31);
  chrtbl[187] = Array(10, 31, 10, 10, 2, 4, 8);
  chrtbl[188] = Array(0, 24, 1, 25, 1, 2, 28);
  chrtbl[189] = Array(0, 31, 1, 2, 4, 10, 17);
  chrtbl[190] = Array(8, 31, 9, 10, 8, 8, 7);
  chrtbl[191] = Array(0, 17, 17, 9, 1, 2, 12);
  chrtbl[192] = Array(0, 15, 9, 21, 3, 2, 12);
  chrtbl[193] = Array(2, 28, 4, 31, 4, 4, 8);
  chrtbl[194] = Array(0, 21, 21, 1, 1, 2, 4);
  chrtbl[195] = Array(14, 0, 31, 4, 4, 4, 8);
  chrtbl[196] = Array(8, 8, 8, 12, 10, 8, 8);
  chrtbl[197] = Array(4, 4, 31, 4, 4, 8, 16);
  chrtbl[198] = Array(0, 14, 0, 0, 0, 0, 31);
  chrtbl[199] = Array(0, 31, 1, 10, 4, 10, 16);
  chrtbl[200] = Array(4, 31, 2, 4, 14, 21, 4);
  chrtbl[201] = Array(2, 2, 2, 2, 2, 4, 8);
  chrtbl[202] = Array(0, 4, 2, 17, 17, 17, 17);
  chrtbl[203] = Array(16, 16, 31, 16, 16, 16, 15);
  chrtbl[204] = Array(0, 31, 1, 1, 1, 2, 12);
  chrtbl[205] = Array(0, 8, 20, 2, 1, 1, 0);
  chrtbl[206] = Array(4, 31, 4, 4, 21, 21, 4);
  chrtbl[207] = Array(0, 31, 1, 1, 10, 4, 2);
  chrtbl[208] = Array(0, 14, 0, 14, 0, 14, 1);
  chrtbl[209] = Array(0, 4, 8, 16, 17, 31, 1);
  chrtbl[210] = Array(0, 1, 1, 10, 4, 10, 16);
  chrtbl[211] = Array(0, 31, 8, 31, 8, 8, 7);
  chrtbl[212] = Array(8, 8, 31, 9, 10, 8, 8);
  chrtbl[213] = Array(0, 14, 2, 2, 2, 2, 31);
  chrtbl[214] = Array(0, 31, 1, 31, 1, 1, 31);
  chrtbl[215] = Array(14, 0, 31, 1, 1, 2, 4);
  chrtbl[216] = Array(18, 18, 18, 18, 2, 4, 8);
  chrtbl[217] = Array(0, 4, 20, 20, 21, 21, 22);
  chrtbl[218] = Array(0, 16, 16, 17, 18, 20, 24);
  chrtbl[219] = Array(0, 31, 17, 17, 17, 17, 31);
  chrtbl[220] = Array(0, 31, 17, 17, 1, 2, 4);
  chrtbl[221] = Array(0, 24, 0, 1, 1, 2, 28);
  chrtbl[222] = Array(4, 18, 8, 0, 0, 0, 0);
  chrtbl[223] = Array(28, 20, 28, 0, 0, 0, 0);
  chrtbl[224] = Array(0, 0, 9, 21, 18, 18, 13);
  chrtbl[225] = Array(10, 0, 14, 1, 15, 17, 15);
  chrtbl[226] = Array(0, 14, 17, 30, 17, 30, 16);
  chrtbl[227] = Array(0, 0, 14, 16, 12, 17, 14);
  chrtbl[228] = Array(0, 17, 17, 17, 19, 29, 16);
  chrtbl[229] = Array(0, 0, 15, 20, 18, 17, 14);
  chrtbl[230] = Array(0, 6, 9, 17, 17, 30, 16);
  chrtbl[231] = Array(0, 15, 17, 17, 17, 15, 1);
  chrtbl[232] = Array(0, 0, 7, 4, 4, 20, 8);
  chrtbl[233] = Array(2, 26, 2, 0, 0, 0, 0);
  chrtbl[234] = Array(2, 0, 6, 2, 2, 2, 2);
  chrtbl[235] = Array(0, 20, 8, 20, 0, 0, 0);
  chrtbl[236] = Array(4, 14, 20, 21, 14, 4, 0);
  chrtbl[237] = Array(8, 8, 28, 8, 28, 8, 15);
  chrtbl[238] = Array(14, 0, 22, 25, 17, 17, 17);
  chrtbl[239] = Array(10, 0, 14, 17, 17, 17, 14);
  chrtbl[240] = Array(0, 22, 25, 17, 17, 30, 16);
  chrtbl[241] = Array(0, 13, 19, 17, 17, 15, 1);
  chrtbl[242] = Array(14, 17, 31, 17, 17, 14, 0);
  chrtbl[243] = Array(0, 0, 0, 0, 11, 21, 26);
  chrtbl[244] = Array(0, 14, 17, 17, 10, 27, 0);
  chrtbl[245] = Array(10, 0, 17, 17, 17, 19, 13);
  chrtbl[246] = Array(31, 16, 8, 4, 8, 16, 31);
  chrtbl[247] = Array(0, 31, 10, 10, 10, 19, 0);
  chrtbl[248] = Array(31, 0, 17, 10, 4, 10, 17);
  chrtbl[249] = Array(0, 17, 17, 17, 17, 15, 1);
  chrtbl[250] = Array(1, 30, 4, 31, 4, 4, 0);
  chrtbl[251] = Array(0, 31, 8, 15, 9, 17, 0);
  chrtbl[252] = Array(0, 31, 21, 31, 17, 17, 0);
  chrtbl[253] = Array(0, 0, 4, 0, 31, 0, 4);
  chrtbl[254] = Array(0, 0, 0, 0, 0, 0, 0);
  chrtbl[255] = Array(31, 31, 31, 31, 31, 31, 31);

  let nbCols = 16;
  let nbRows = 2;

  let CHAR_MAP = {};

  function buildCharMap() {
    console.log(chrtbl);

    for (let i = 0; i < 256; i++) {
      let pattern = chrtbl[i].slice(0, 7);
      while (pattern.length < 8) pattern.push(0);
      CHAR_MAP[String.fromCharCode(i)] = pattern;
    }
  }

  function renderLCD(lines) {
    const container = document.getElementById('lcd-pixels');
    container.innerHTML = '';

    const containerWidth = container.parentElement.offsetWidth || window.innerWidth;
    const charWidth = Math.max(24, Math.floor(containerWidth * 0.94 / nbCols));
    const charHeight = Math.round(charWidth * 8 / 5);
    document.documentElement.style.setProperty('--char-w', charWidth + 'px');
    document.documentElement.style.setProperty('--char-h', charHeight + 'px');
    for (let row = 0; row < nbRows; row++) {
      const lineDiv = document.createElement('div');
      lineDiv.className = 'lcd-line';
      let lineText = (lines[row] || '').padEnd(nbCols, ' ');
      for (let c = 0; c < nbCols; c++) {
        const char = document.createElement('div');
        char.className = 'lcd-char';
        let ch = lineText[c] || ' ';
        let pattern = CHAR_MAP[ch] || CHAR_MAP[' '];
        for (let y = 0; y < 8; y++) {
          for (let x = 0; x < 5; x++) {
            const dot = document.createElement('div');
            dot.className = 'lcd-dot' + ((pattern[y] >> (4 - x)) & 1 ? ' on' : '');
            char.appendChild(dot);
          }
        }
        lineDiv.appendChild(char);
      }
      container.appendChild(lineDiv);
    }
  }

  function changeLcdSize() {
    nbCols = Math.max(8, Math.min(40, parseInt(document.getElementById('cols').value)));
    nbRows = Math.max(1, Math.min(4, parseInt(document.getElementById('rows').value)));
    updateLCD();
  }

  function updateLCD() {
    let text = document.getElementById('lcdtext').value;
    let lines = text.split('\n').slice(0, nbRows);
    renderLCD(lines);
  }

  function displayLCD(escapedLines) {
    console.log(escapedLines);
    let lines = JSON.parse(escapedLines).split('\n').slice(0, nbRows);
    console.log(lines);
    renderLCD(lines);
  }

  function init() {
    window.addEventListener('resize', updateLCD);

    setTimeout(function () {
      buildCharMap();
      updateLCD();
    }, 300);
  }
</script>