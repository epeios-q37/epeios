<script>
// you might want to write these into if statements to make sure that e.data[0] is varA if you have multiple messages coming across
    var code = [];

    if (typeof window.addEventListener != 'undefined') {
        window.addEventListener('message', function(e) {
            code[e.data[0]] = e.data[1];
            console.log(code)
        }, false);
    } else if (typeof window.attachEvent != 'undefined') { // this part is for IE8
        window.attachEvent('onmessage', function(e) {
            code[e.data[0]] = e.data[1];
        });
    }

    function test(id)
    {
        if ( !id )
            id = "_BrythonIdNotSet_";
        document.getElementById("Code").value = code[id];
        document.forms['Brython'].submit();
    }
</script>
<button onclick="test('toto')">Test</button>
<details open>
<iframe id="MyFrame" src="http://localhost/brython/index.php?id=toto" width="100%" height="50%" ></iframe>
</details>
<button onclick="test()">Test</button>
<details open>
<iframe id="MyFrame" src="http://localhost/brython/index.php" width="100%" height="50%" ></iframe>
</details>
<form style="display: none;" action="http://localhost/brython/index.php" name="Brython" method="post" target="_blank">
    <input type="hidden" name="code" id="Code" />
</form>



